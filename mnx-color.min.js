!function(a){"use strict";function d(a){var e,g,h,i,b=["<svg width=100% height=100% xmlns=http://www.w3.org/2000/svg>"],d=["<defs>"],f=a.length;for(e=0;f>e;e+=1){for(c+=1,d.push("<linearGradient id=g",c,a[e].dir?" x2=0 y2=1":"",">"),g=a[e].stops,i=g.length-1,h=0;i>=h;h+=1)d.push("<stop offset=",h/i," stop-color=#",g[h].substr(0,3)," stop-opacity=",g[h][3]||1,"/>");d.push("</linearGradient>"),b.push("<rect width=100% height=100% fill=url(#g",c,")/>")}return d.push("</defs>"),b.splice(1,0,d.join("")),d.push("</svg>"),b.join("")}function e(a){var b=a[0]/255,c=a[1]/255,d=a[2]/255,e=Math.max(b,c,d),f=Math.min(b,c,d),g=e-f,h=0,i=0;if(e!==f){switch(e){case b:h=(c-d)/g+(d>c?6:0);break;case c:h=(d-b)/g+2;break;case d:h=(b-c)/g+4}h/=6,i=g/e}return[h,i,e]}function f(a){var b=6*a[0],c=a[1],d=a[2],e=Math.floor(b),f=b-e,g=d*(1-c),h=d*(1-c*f),i=d*(1-c*(1-f)),j=e%6,k=[d,h,g,g,i,d][j],l=[i,d,d,h,g,g][j],m=[g,g,i,d,d,h][j];return[Math.round(255*k),Math.round(255*l),Math.round(255*m)]}function g(a){function j(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>c?b:2/3>c?a+6*(b-a)*(2/3-c):a}var e,f,g,h,i,b=a[0]/360,c=a[1]/100,d=a[2]/100;return 0===c?e=f=g=d:(h=.5>d?d*(1+c):d+c-d*c,i=2*d-h,e=j(i,h,b+1/3),f=j(i,h,b),g=j(i,h,b-1/3)),[Math.round(255*e),Math.round(255*f),Math.round(255*g)]}function h(a,b){return Math.min(b,Math.max(0,a))}function i(c){return{restrict:"A",require:"ngModel",link:function(i,j,k,l){function z(a,b){"alpha"===x.name?(w=a/x.width,t.css({left:a+"px"})):("lch"===x.name?(v[1]=a/x.width,v[2]=(x.height-b)/x.height,r.css({top:b+"px",left:a+"px"})):"rch"===x.name&&(v[0]=b/x.height,s.css({top:b+"px"}),n.css({"background-color":"rgb("+f([v[0],1,1])+")"})),u=f(v),q.attr("stop-color","rgb("+u+")")),1!==w?l.$setViewValue("rgba("+u+","+Math.round(100*w)/100+")"):l.$setViewValue(["#",("0"+u[0].toString(16)).substr(-2),("0"+u[1].toString(16)).substr(-2),("0"+u[2].toString(16)).substr(-2)].join("")),j.val(l.$viewValue)}function A(){v=e(u),r.css({top:Math.round(n[0].clientHeight-1-v[2]*(n[0].clientHeight-1))+"px",left:Math.round(v[1]*(n[0].clientWidth-1))+"px"}),s.css({top:Math.round(v[0]*(o[0].clientHeight-1))+"px",left:0}),t.css({top:0,left:Math.round(w*(p[0].clientWidth-1))+"px"}),n.css({"background-color":"rgb("+f([v[0],1,1])+")"}),q.attr("stop-color","rgb("+u+")")}function B(a,b){function d(a){return parseInt((a+a).substr(-2),16)}var c=[];if(a!==b){if((c=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(a))||(c=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(a)))u=[d(c[1]),d(c[2]),d(c[3])],w=1;else if((c=/^rgb\((\d+)\s*,\s*(\d+)\s*,\s*(\d+)\)$/.exec(a))||(c=/^rgba\((\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d*\.?\d+)\)$/.exec(a)))u=[h(+c[1],255),h(+c[2],255),h(+c[3],255)],w=h(+(c[4]||1),1);else if((c=/^rgb\((\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\)$/.exec(a))||(c=/^rgba\((\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*,\s*(\d*\.?\d+)\)$/.exec(a)))u=[Math.round(255*(h(+c[1],100)/100)),Math.round(255*(h(+c[2],100)/100)),Math.round(255*(h(+c[3],100)/100))],w=h(+(c[4]||1),1);else if((c=/^hsl\((\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\)$/.exec(a))||(c=/^hsla\((\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*,\s*(\d*\.?\d+)\)$/.exec(a)))u=g([h(+c[1],360),h(+c[2],100),h(+c[3],100)]),w=h(+(c[4]||1),1);else if("transparent"===a)u=[0,0,0],w=0;else{if(!a||null===(c=/^[a-z]{3,}$/i.exec(a)))return;if(p.css({color:"rgba(0,0,0,0)"}),p.css({color:c[0]}),c=window.getComputedStyle(p[0]).color.match(/(\d)+/g),"0,0,0,0"===c.join())return;u=[+c[0],+c[1],+c[2]],w=1}A()}}function C(){y=i.$watch(k.ngModel,B)}function D(a){var b=h(a.pageX-x.left,x.width),c=h(a.pageY-x.top,x.height);a.stopPropagation(),a.preventDefault(),z(b,c)}function E(a){var b=this,d=b.offsetParent;x={name:b.getAttribute("name"),width:b.clientWidth-1,height:b.clientHeight-1,top:d.offsetTop+d.clientTop+b.offsetTop+b.clientTop,left:d.offsetLeft+d.clientLeft+b.offsetLeft+b.clientLeft},y(),D(a),c.on("mousemove",D).on("mouseup",function e(){c.off("mousemove",D).off("mouseup",e),C()})}var x,y,m=a.element('<div class="'+b+'container"></div>'),n=a.element(['<div name="lch" class="'+b+'lch">',d([{stops:["fff","fff0"]},{stops:["0000","000"],dir:1}]),"</div>"].join("")),o=a.element(['<div name="rch" class="'+b+'rch">',d([{stops:["f00","ff0","0f0","0ff","00f","f0f","f00"],dir:1}]),"</div>"].join("")),p=a.element(['<div name="alpha" class="'+b+'alpha">',d([{stops:["0000","000"]}]),"</div>"].join("")),q=p.find("stop"),r=a.element('<div class="'+b+'lcur"></div>'),s=a.element('<div class="'+b+'rcur"></div>'),t=a.element('<div class="'+b+'acur"></div>'),u=[0,0,0],v=[0,0,0],w=1;m.append(n.append(r)).append(o.append(s)).append(p.append(t)),j.on("focus",function(){m.css({top:j[0].offsetTop+j[0].offsetHeight+"px",left:j[0].offsetLeft+"px"}),j.after(m),n.on("mousedown",E),o.on("mousedown",E),p.on("mousedown",E),B(l.$viewValue),A(),C(),j.on("blur",function a(){j.off("blur",a),y(),m.remove()})})}}}var b="mnx-color-",c=0;i.$inject=["$document"],a.module("mnxColor",[]).directive("mnxColor",i)}(window.angular);
